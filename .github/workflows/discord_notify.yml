name: Discord Notify

on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]
  pull_request_review:
    types: [submitted]

jobs:
  notify:
    runs-on: ubuntu-latest
    # ✅ 특정 사람 제외
    if: github.actor != 'coderabbitai' && github.actor != 'coderabbitai[bot]'
    steps:
      - name: Send to Discord
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          curl -H "Content-Type: application/json" \
            -d "{\"content\":\"${{ github.repository }}: ${{ github.event_name }} by ${{ github.actor }}\"}" \
            "$DISCORD_WEBHOOK"
